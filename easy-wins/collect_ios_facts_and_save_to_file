---
 - name: Collect IOS Facts from Devices and Save them to files in JSON Format
   hosts: all



   vars:
    - output_directory: output-directory

   tasks:
    - file:
        path: "{{output_directory}}"
        state: directory
      run_once: true

    - ios_facts:
        ansible_connection: network_cl
      register: results

    - copy:
        content:  "{{results.ansible_facts}}"
        dest:     "{{output_directory}}/{{inventory_hostname}}.json"


